{"ast":null,"code":"import { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport let CartService = /*#__PURE__*/(() => {\n  class CartService {\n    constructor() {\n      this.cartItems = [];\n      this.totalPrice = new Subject();\n      this.totalQuantity = new Subject();\n    }\n    addToCart(cartItem) {\n      // Check if we already have the item in our cart\n      let alreadyExists = false;\n      let existingCartItem;\n      if (this.cartItems.length > 0) {\n        // Find the item in the cart\n        existingCartItem = this.cartItems.find(value => value.id === cartItem.id);\n        // Check if we found it\n        alreadyExists = existingCartItem !== undefined;\n      }\n      if (alreadyExists) {\n        // Increment the quantity\n        existingCartItem.quantity++;\n      } else {\n        // Add the cart item\n        this.cartItems.push(cartItem);\n      }\n      this.computeCartTotals();\n    }\n    computeCartTotals() {\n      let totalPrice = 0;\n      let totalQuantity = 0;\n      this.cartItems.forEach(cartItem => {\n        totalPrice += cartItem.quantity * cartItem.unitPrice;\n        totalQuantity += cartItem.quantity;\n      });\n      // Publish the new totals\n      this.totalPrice.next(totalPrice);\n      this.totalQuantity.next(totalQuantity);\n    }\n    getCartItems() {\n      return this.cartItems;\n    }\n    decrementQuantity(cartItem) {\n      cartItem.quantity--;\n      if (cartItem.quantity === 0) {\n        this.removeFromCart(cartItem);\n      } else {\n        this.computeCartTotals();\n      }\n    }\n    removeFromCart(cartItem) {\n      const cartIndex = this.cartItems.findIndex(value => value.id === cartItem.id);\n      if (cartIndex > -1) {\n        this.cartItems.splice(cartIndex, 1);\n        this.computeCartTotals();\n      }\n    }\n  }\n  CartService.ɵfac = function CartService_Factory(t) {\n    return new (t || CartService)();\n  };\n  CartService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: CartService,\n    factory: CartService.ɵfac,\n    providedIn: 'root'\n  });\n  return CartService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}